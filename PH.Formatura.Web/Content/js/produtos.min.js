oProdutos={jqThis:null,DadosProdutos:null,evento_click:"click",evento_change:"change",seletor_geral:".conteudo-geral",tbProdutos:"#tbProdutos",chk_product:".jqProduct",btn_euquero:".btn-eu-quero",btn_euquero_header:".btn-eu-quero-header",div_min_fotos_modal:"#div-min-fotos-modal",div_max_fotos_modal:"#div-max-fotos-modal",QtdMinFoto:"#QtdMinFoto",QtdMaxFoto:"#QtdMaxFoto",btn_validar_fotos:".btn-validar-fotos",produtoName:".produtoName",combo_pacote:"#combo-pacotes",btn_incluir_itens:".btn-incluir-itens",ul_itens:".ul-itens",info_change_pacote:"#div-info-change-pacote-modal",pacote_id_old:"#pacote-id-old",btn_close_modal_change_pacote:"#div-info-change-pacote-modal .btn-close",btn_zoom_img:".zoom-img",zoom_container:".zoom-container",btn_fechar_zoom_container:".zoom-container .dvfechar",btn_number:".btn-number",input_number:".input-number",url_produtos_pacote:(oGeral.string_url_base_aplicacao||oInicial.BaseUrlAplicacao)+"/Produtos/ProdutosPacote",string_url_api_save_cartproduct:(oGeral.string_url_base_aplicacao||oInicial.BaseUrlAplicacao)+"/api/Produtos/SaveCartProduct",string_url_api_delete_cartproduct:(oGeral.string_url_base_aplicacao||oInicial.BaseUrlAplicacao)+"/api/Produtos/DeleteItemCartProduct",string_url_api_delete_all_cartproduct:(oGeral.string_url_base_aplicacao||oInicial.BaseUrlAplicacao)+"/api/Produtos/DeleteAllItensCart",cookie_user_name:cookie_user_name,urlCART:urlCART,objConfig:{},Carregar:function(n){var t=this;t.jqThis=jQuery(t.seletor_geral);t.DadosProdutos=n;t.jqThis.length&&t.CarregarEventos()},CarregarEventos:function(){var n=this;n.jqThis.on(n.evento_click,n.chk_product,function(t){n.SaveCartProduct(t)});n.jqThis.on(n.evento_click,n.btn_euquero,function(){n.ValidaDadosProdutos()});n.jqThis.on(n.evento_click,n.btn_euquero_header,function(){n.ValidaDadosProdutos()});n.jqThis.on(n.evento_change,n.combo_pacote,function(){n.ChangePacote()});n.jqThis.on(n.evento_click,n.btn_incluir_itens,function(){n.ExibeItensOcultos()});$(n.btn_close_modal_change_pacote).on(n.evento_click,function(){n.UndoSelect()});n.jqThis.on(n.evento_click,n.btn_zoom_img,function(){n.ShowZoom(!0,this)});$(n.btn_fechar_zoom_container).on(n.evento_click,function(){n.ShowZoom(!1,this)});$(n.zoom_container).on(n.evento_click,function(){n.ShowZoom(!1,this)});n.jqThis.on(n.evento_click,n.btn_number,function(t){n.BtnNumberAddOrMinus(t,this)});n.jqThis.on(n.evento_focus,n.input_number,function(){n.BtnNumberFocus(this)});n.jqThis.on(n.evento_change,n.input_number,function(){n.BtnNumberChange(this)});n.jqThis.on(n.evento_keydown,n.input_number,function(t){n.BtnNumberKeyDown(t)})},SaveCartProductItem:function(n){var i=this,t={},u="",e=$(n),r=e.attr("data-product-id"),f=parseInt(i.jqThis.find("#txt_"+r).val()),o=i.jqThis.find("#qtd_fotos_"+r).text();t.AlunoTurmaID=Number(objConfig.aluno_turma_id);t.BookID=0;t.ID=0;t.ProductID=Number(r);t.QtdFoto=Number(o);t.UserID=Number(objConfig.user_id);t.Qtd=Number(f);u=f==0?i.string_url_api_delete_cartproduct:i.string_url_api_save_cartproduct;jQuery.ajax({method:"POST",url:u,contentType:"application/json",data:JSON.stringify(t),headers:oUtil.GetToken(),beforeSend:function(){oUtil.ShowLoader(!0)}}).done(function(){}).fail(function(n,t){i.TrataErroCart(n,t)}).always(function(){oUtil.ShowLoader(!1)})},BtnNumberAddOrMinus:function(n,t){var u=this;n.preventDefault();fieldName=$(t).attr("data-field");type=$(t).attr("data-type");prodID=$(t).attr("data-product-id");var i=u.jqThis.find("#txt_"+prodID),f=u.jqThis.find("#chk_"+prodID),r=parseInt(i.val());isNaN(r)?i.val(0):type=="minus"?(r>i.attr("min")&&i.val(r-1).change(),parseInt(i.val())==i.attr("min")&&$(t).attr("disabled",!0)):type=="plus"&&(r<i.attr("max")&&i.val(r+1).change(),parseInt(i.val())==i.attr("max")&&$(t).attr("disabled",!0));parseInt(i.val())==0?f.closest("label")[0].MaterialCheckbox.uncheck():parseInt(i.val())>0&&f.closest("label")[0].MaterialCheckbox.check()},BtnNumberFocus:function(n){$(n).data("oldValue",$(n).val())},BtnNumberChange:function(n){var t=this;minValue=parseInt($(n).attr("min"));maxValue=parseInt($(n).attr("max"));valueCurrent=parseInt($(n).val());prodID=$(n).attr("data-product-id");name=$(n).attr("name");valueCurrent>=minValue?$(".btn-number-"+prodID+"[data-type='minus'][data-field='"+name+"']").removeAttr("disabled"):(oUtil.ShowModalError("","O valor mínimo foi alcançado"),$(n).val($(n).data("oldValue")));valueCurrent<=maxValue?$(".btn-number-"+prodID+"[data-type='plus'][data-field='"+name+"']").removeAttr("disabled"):(oUtil.ShowModalError("","O valor máximo foi alcançado"),$(n).val($(n).data("oldValue")));t.SaveCartProductItem(n)},BtnNumberKeyDown:function(n){$.inArray(n.keyCode,[46,8,9,27,13,190])!==-1||n.keyCode==65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()},ShowZoom:function(n,t){var r=this,i=$(r.zoom_container);n?(i.find(".cont-img").html("<img src="+$(t).attr("img_zoom_path")+">"),i.show()):i.hide()},ExibeItensOcultos:function(){var n=this,t="hidden";n.jqThis.find(n.ul_itens).find("li").each(function(){var n=$(this);n.hasClass(t)&&n.removeClass(t)});n.jqThis.find(n.btn_incluir_itens).addClass(t)},ChangePacote:function(){var n=this,i=n.jqThis.find(n.combo_pacote).selectpicker("val"),u=n.jqThis.find(n.pacote_id_old).val(),t=$(n.info_change_pacote),r;if(i==u){n.ChangePacoteDo(i,t);return}if(r=n.jqThis.find(n.ul_itens).find("li "+n.chk_product+":checked").length,r==0){n.ChangePacoteDo(i,t);return}t.find(".btn-ok").unbind(n.evento_click);t.find(".btn-ok").on(n.evento_click,function(){return n.DeleteAllItensCart(i,t),!1});t.modal()},UndoSelect:function(){var n=this;n.jqThis.find(n.combo_pacote).val(n.jqThis.find(n.pacote_id_old).val());n.jqThis.find(n.combo_pacote).selectpicker("render")},DeleteAllItensCart:function(n,t){var i=this,r;t.modal("hide");r={UserID:objConfig.user_id,AlunoTurmaID:objConfig.aluno_turma_id};jQuery.ajax({method:"POST",url:i.string_url_api_delete_all_cartproduct,contentType:"application/json",data:JSON.stringify(r),headers:oUtil.GetToken(),beforeSend:function(){oUtil.ShowLoader(!0)}}).done(function(){i.ChangePacoteDo(n,t)}).fail(function(){oUtil.ShowModalError("","Erro ao remover os itens do carrinho")}).always(function(){oUtil.ShowLoader(!1)})},ChangePacoteDo:function(n,t){var i=this;t.modal("hide");jQuery.ajax({method:"POST",url:i.url_produtos_pacote+"?pacoteID="+n+"&alunoTurmaID_Cript="+objConfig.aluno_turma_id_Cript2,beforeSend:function(){oUtil.ShowLoader(!0)}}).done(function(t){t.indexOf("PAGE_ERROR")==-1?(i.jqThis.find(i.ul_itens).html(t),i.jqThis.find(i.btn_incluir_itens).removeClass("hidden"),i.jqThis.find(i.pacote_id_old).val(n),oUtil.RefactorMDL_JS()):oUtil.ShowModalError("","Erro ao carregar informações do pacote")}).fail(function(){oUtil.ShowModalError("","Erro ao carregar informações do pacote")}).always(function(){oUtil.ShowLoader(!1)})},ValidaDadosProdutos:function(){var n=this,e,r,t,o,u,f,i;try{for(e=n.DadosProdutos.length,r=0;r<e;r++)if((t=n.DadosProdutos[r],o=n.jqThis.find("#chk_"+t.ProductID+":checked").length>0,o!=!1)&&(parseInt(t.QtdMinFoto)!=0||parseInt(t.QtdMaxFoto)!=0)){if(u=n.jqThis.find("#qtd_fotos_"+t.ProductID).html(),f=n.jqThis.find("#urlValidacaoFotos_"+t.ProductID).val(),parseInt(t.QtdMinFoto)>0&&u<parseInt(t.QtdMinFoto)){i=$(n.div_min_fotos_modal);i.find(n.QtdMinFoto).html(t.QtdMinFoto);i.find(n.produtoName).html(t.NomeProduto);i.find(n.btn_validar_fotos).unbind(n.evento_click);i.find(n.btn_validar_fotos).on(n.evento_click,function(){return window.location=f,!1});i.modal();return}if(t.QtdMaxFoto>0&&u>parseInt(t.QtdMaxFoto)){i=$(n.div_max_fotos_modal);i.find(n.QtdMaxFoto).html(t.QtdMaxFoto);i.find(n.produtoName).html(t.NomeProduto);i.find(n.btn_validar_fotos).unbind(n.evento_click);i.find(n.btn_validar_fotos).on(n.evento_click,function(){return window.location=f,!1});i.modal();return}}sessionStorage.setItem("AlunoTurmaID_Cript2",objConfig.aluno_turma_id_Cript2);window.location=n.urlCART}catch(s){oUtil.ShowModalError("","Erro no metodo ValidaDadosProdutos erro: "+s)}},SaveCartProduct:function(n){var f=this,t={},i="",r=!0,u;t.AlunoTurmaID=objConfig.aluno_turma_id;t.BookID=0;t.ID=0;t.ProductID=Number($(n.target).attr("data-prod_id"));t.Qtd=1;t.QtdFoto=0;t.UserID=objConfig.user_id;$(n.target).is(":checked")?(i=objConfig.url_save,r=!0):(i=objConfig.url_delete,r=!1);u=f.jqThis.find(".div-grupo-alterar-qtd .input-group .input-group-btn .btn-number-minus-"+t.ProductID);jQuery.ajax({method:"POST",url:i,data:t,headers:oUtil.GetToken(),beforeSend:function(){oUtil.ShowLoader(!0)}}).done(function(){var n=f.jqThis.find("#txt_"+t.ProductID);r?(n.val(1),u.removeAttr("disabled")):(u.attr("disabled",!0),n.val(0))}).fail(function(n){console.log(n)}).always(function(){oUtil.ShowLoader(!1)})},GotoValidation:function(n){var t=this;window.location=n}};jQuery(document).ready(function(){oProdutos.Carregar(DadosProdutos)});
/*
//# sourceMappingURL=produtos.min.js.map
*/