var oCheckout={jqThis:null,jqPedidoPgtoChequeQtdAtual:0,jqDivModalAlteracaoEntrega:null,EmRequisicaoApiCEP:!1,ListaProdutos:[],ListaProdIDs:[],ListaPrecos:[],ListaFotosProducts:[],OrigemOnlineOffline:"",FormaPgto:{Nome:"cartao-credito",Type:1,Group:2},OrderID:0,vItensInfoPrimordiaisSessionStorage:["config_turma_aluno"],objDadosPedido:null,string_url_api_get_address_by_cep:"/api/Checkout/GetAddressByCep",string_url_api_get_address_aluno:"/api/Alunos/Detail",string_url_alunos_online:"/Alunos",string_url_alunos_offline:"/Offline/Alunos",string_url_api_get_list_products:"/api/Checkout/GetListProducts",string_url_api_save_cartproduct:"/api/Produtos/SaveCartProduct",string_url_api_delete_cartproduct:"/api/Produtos/DeleteItemCartProduct",string_url_selecao_fotos_online:"/Agendamento/ValidacaoFotos/?a=",string_url_selecao_fotos_offline:"/Offline/ValidacaoFotos",string_url_api_get_lista_precos:"/api/Checkout/GetListProductsPrice",string_url_api_register_order:"/api/Checkout/RegisterOrder",string_url_confirm_page:"/Checkout/Confirm",string_url_produtos_online:"/Produtos",string_url_produtos_offline:"/Offline/Produtos",string_url_checkout:"/Checkout",string_class_is_invalid:"is-invalid",string_class_is_valid:"is-valid",string_is_dirty:"is-dirty",string_intervalo_animacao:400,string_forma_pgto:"forma-pgto",string_replicar:"replicar",cookie_user_name:cookie_user_name,string_pgto_cartao:"cartao-credito",string_pgto_boleto:"boleto",string_pgto_cheque:"cheque",string_pgto_dinheiro:"dinheiro",string_validacaoconclusao_cpf_informado_invalido:"O CPF informado é inválido",string_validacaoconclusao_cnpj_informado_invalido:"O CNPJ informado é inválido",string_validacaoconclusao_cpf_cnpj_invalido:"O documento (CPF/CNPJ) informado é inválido",string_validacaoconclusao_cpf_cnpj_vazio:"Informe um documento (CPF/CNPJ) para a emissão da nota fiscal",string_validacaoconclusao_nenhum_produto_selecionado:"Selecione ao menos 1(um) produto com quantidade maior que 0 (zero)",string_validacaoconclusao_cartao_qtd_0:"Selecione a quantidade de parcelas no cartão",string_validacaoconclusao_cartao_numero_nao_informado:"Informe o número do cartão de crédito",string_validacaoconclusao_cartao_nome_nao_informado:"Informe o nome impresso no cartão de crédito",string_validacaoconclusao_cartao_validade_nao_informada:"Informe a validade do cartão de crédito",string_validacaoconclusao_cartao_validade_invalida:"A validade do cartão de crédito é inválida",string_validacaoconclusao_cartao_cvv_nao_informado:"Informe o código de segurança do cartão de crédito",string_validacaoconclusao_cartao_cvv_invalido:"O código de segurança do cartão de crédito é inválido",string_validacaoconclusao_cartao_offline:"Pagamento com cartão de crédito não disponível offline",string_validacaoconclusao_boleto_qtd_0:"Selecione a quantidade de parcelas no boleto",string_validacaoconclusao_cheque_qtd_parcelas_nao_selecionada:"Selecione a quantidade de parcelas no cheque",string_validacaoconclusao_cheque_cpf_invalido:"O CPF informado na {$parcela}ª parcela do cheque é inválido",string_validacaoconclusao_cheque_cpf_nao_informado:"Informe um CPF para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_valor_invalido:"O valor informado na {$parcela}ª parcela do cheque é inválido",string_validacaoconclusao_cheque_valor_nao_informado:"Informe um valor para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_telefone_invalido:"O telefone informado na {$parcela}ª parcela do cheque é inválido",string_validacaoconclusao_cheque_telefone_nao_informado:"Informe um telefone para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_vencimento_invalido:"O vencimento informado na {$parcela}ª parcela do cheque é inválido",string_validacaoconclusao_cheque_vencimento_nao_informado:"Informe um vencimento para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_emitente_nao_informado:"Informe um emitente para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_cmc7_invalido:"O código CMC7 informado na {$parcela}ª parcela do cheque é inválido",string_validacaoconclusao_cheque_cmc7_duplicado:"O código CMC7 informado na {$parcela}ª parcela já existe em outra parcela",string_validacaoconclusao_cheque_cmc7_nao_informado:"Informe um código CMC7 para a {$parcela}ª parcela do cheque",string_validacaoconclusao_cheque_somatorio_invalido:"O somatório dos valores dos cheques não confere com o total da compra",string_validacaoconclusao_dinheiro_check_nao_selecionado:"Confirme o recebimento do dinheiro em espécie",string_ChaveSessionStorageDadosConclusao:"dados_conclusao_pedido",string_validacao_comprador_cpf_cnpj:"Informe o CPF/CNPJ do comprador",string_validacao_comprador_endereco:"Informe o endereço completo do comprador",string_validacao_comprador_nome:"Informe o nome do comprador",string_validacao_comprador_email:"Informe o email do comprador",evento_click:"click",evento_change:"change",evento_keyup:"keyup",evento_keydown:"keydown",evento_blur:"blur",evento_focus:"focus",seletor_geral:".conteudo-geral",seletor_radios_pedido_pgto_cartao_radio_cartao:".radioDadosPedidoPgtoCartao",seletor_radio_pedido_pgto_cartao_radio_cartao_1:"#radioDadosPedidoPgtoCartao1",seletor_radio_pedido_pgto_cartao_radio_cartao_2:"#radioDadosPedidoPgtoCartao2",seletor_div_pedido_pgto_cartao1:".divDadosPedidoPgtoCartao1",seletor_div_pedido_pgto_cartao2:".divDadosPedidoPgtoCartao2",seletor_ancora_pedido_forma_pgto:".ancora-pedido-forma-pgto",seletor_ancora_pedido_forma_pgto_ativo:".ancora-pedido-forma-pgto.is-active",seletor_select_pedido_pgto_cheque_qtd:"#dadosPedidoPgtoChequeQtd",seletor_div_pedido_pgto_cheque:"#forma-pgto-tab-cheque",seletor_div_pedido_pgto_cheque_child:".divDadosPedidoPgtoCheque",seletor_btn_alterar_endereco_entrega:".btn-alterar-endereco-entrega",seletor_div_modal_alteracao_entrega:".div-modal-alteracao-entrega",seletor_form_alteracao_endereco_entrega:"#form-alteracao-endereco-entrega",seletor_input_alteracao_endereco_entrega_cep:"#form-alteracao-endereco-entrega .tbxCep",seletor_btn_alteracao_endereco_entrega_nao_sei_meu_cep:"#form-alteracao-endereco-entrega .btn-alteracao-endereco-entrega-nao-sei-meu-cep",seletor_input_alteracao_endereco_entrega_destinatario:"#form-alteracao-endereco-entrega .tbxDestinatario",seletor_input_alteracao_endereco_entrega_logradouro:"#form-alteracao-endereco-entrega .tbxLogradouro",seletor_input_alteracao_endereco_entrega_numero:"#form-alteracao-endereco-entrega .tbxNumero",seletor_input_alteracao_endereco_entrega_complemento:"#form-alteracao-endereco-entrega .tbxComplemento",seletor_input_alteracao_endereco_entrega_bairro:"#form-alteracao-endereco-entrega .tbxBairro",seletor_input_alteracao_endereco_entrega_cidade:"#form-alteracao-endereco-entrega .tbxCidade",seletor_select_alteracao_endereco_entrega_estado:"#form-alteracao-endereco-entrega .sbxEstado",seletor_div_checkout_transacao_fade_offline:"#div-checkout-transacao-fade-offline",seletor_dados_pedido_nfe_cpf_cnpj:"#dadosPedidoNfeCpfCnpj",seletor_div_dados_pedido_nfe_cpf_cnpj:".div-dados-pedido-nfe-cpf-cnpj",seletor_btn_confirmar_alteracao_endereco_entrega:".btn-confirmar-alteracao-endereco-entrega",seletor_dados_pedido_endereco_destinatario:".dados-pedido-endereco-destinatario",seletor_dados_pedido_endereco_completo:".dados-pedido-endereco-completo",seletor_dados_pedido_endereco_cep:".dados-pedido-endereco-cep",seletor_hiddenPedidoEnderecoDestinatario:".hiddenPedidoEnderecoDestinatario",seletor_hiddenPedidoEnderecoLogradouro:".hiddenPedidoEnderecoLogradouro",seletor_hiddenPedidoEnderecoNumero:".hiddenPedidoEnderecoNumero",seletor_hiddenPedidoEnderecoComplemento:".hiddenPedidoEnderecoComplemento",seletor_hiddenPedidoEnderecoBairro:".hiddenPedidoEnderecoBairro",seletor_hiddenPedidoEnderecoMunicipio:".hiddenPedidoEnderecoMunicipio",seletor_hiddenPedidoEnderecoEstado:".hiddenPedidoEnderecoEstado",seletor_hiddenPedidoEnderecoCEP:".hiddenPedidoEnderecoCEP",seletor_msg_erro_validacao_alteracao_endereco_entrega:".msg-erro-validacao-alteracao-endereco-entrega",seletor_hiddenPedidoFormaPgto:".hiddenPedidoFormaPgto",seletor_div_dadosPedidoPgtoChequeCMC7:".div-dadosPedidoPgtoChequeCMC7",seletor_tbxDadosPedidoPgtoChequeCMC7:".tbxDadosPedidoPgtoChequeCMC7",seletor_dadosPedidoPgtoChequeCMC7bloco1Input1:".dadosPedidoPgtoChequeCMC7bloco1Input1",seletor_dadosPedidoPgtoChequeCMC7bloco1Input2:".dadosPedidoPgtoChequeCMC7bloco1Input2",seletor_dadosPedidoPgtoChequeCMC7bloco2Input1:".dadosPedidoPgtoChequeCMC7bloco2Input1",seletor_dadosPedidoPgtoChequeCMC7bloco2Input2:".dadosPedidoPgtoChequeCMC7bloco2Input2",seletor_dadosPedidoPgtoChequeCMC7bloco2Input3:".dadosPedidoPgtoChequeCMC7bloco2Input3",seletor_dadosPedidoPgtoChequeCMC7bloco3Input1:".dadosPedidoPgtoChequeCMC7bloco3Input1",seletor_dadosPedidoPgtoChequeCMC7bloco3Input2:".dadosPedidoPgtoChequeCMC7bloco3Input2",seletor_dadosPedidoPgtoChequeCMC7bloco3Input3:".dadosPedidoPgtoChequeCMC7bloco3Input3",seletor_dadosPedidoPgtoChequeCMC7Completo_$:".dadosPedidoPgtoChequeCMC7Completo_",seletor_dadosPedidoPgtoChequeCMC7Completo:".dadosPedidoPgtoChequeCMC7Completo",seletor_dadosPedidoPgtoCartaoParcelas:"#dadosPedidoPgtoCartao1Parcelas",seletor_dadosPedidoPgtoCartao1Numero:"#dadosPedidoPgtoCartao1Numero",seletor_dadosPedidoPgtoCartao1Nome:"#dadosPedidoPgtoCartao1Nome",seletor_dadosPedidoPgtoCartao1Validade:"#dadosPedidoPgtoCartao1Validade",seletor_dadosPedidoPgtoCartao1CVV:"#dadosPedidoPgtoCartao1CVV",seletor_tabela_produtos:"#tb_produtos",btn_number:".btn-number",input_number:".input-number",seletor_datepicker:".datetimepicker",seletor_btn_concluir_compra:"#btn-concluir-compra",seletor_formPedido:"#formPedido",seletor_spn_qtd_fotos:"#spn_",seletor_txt_qtd_item:"#txt_",seletor_chk_item:"#chk_",seletor_chk_all:".jqCheckProduct",seletor_qtd_item:".jqQtdProduct",seletor_valor_total:"#spn_valortotal",seletor_dadosPedidoPgtoBoletoQtdParcelas:"#dadosPedidoPgtoBoletoQtdParcelas",seletor_parcelas_cheque:"#dadosPedidoPgtoChequeQtd",seletor_link_fotos:"#lnkfotos",seletor_hiddenPedidoValorTotal:"#dadosPedidoValorTotal",seletor_dadosPedidoPgtoChequeCPF:".dadosPedidoPgtoChequeCPF",seletor_dadosPedidoPgtoChequeValor:".dadosPedidoPgtoChequeValor",seletor_dadosPedidoPgtoChequeTelefone:".dadosPedidoPgtoChequeTelefone",seletor_dadosPedidoPgtoChequeVencimento:".dadosPedidoPgtoChequeVencimento",seletor_dadosPedidoPgtoChequeEmitente:".dadosPedidoPgtoChequeEmitente",seletor_span_valor_dinheiro_especie_recebido:".span-valor-dinheiro-especie-recebido",seletor_span_msg_erro_cmc7:".span-msg-erro-cmc7",seletor_dadosPedidoCheckRecebimento:"#dadosPedidoCheckRecebimento",seletor_spanValorParcelasBoleto:"#spanValorParcelasBoleto",seletor_spanValorParcelasCartao:"#spanValorParcelasCartao",seletor_hiddenPedidoCompradorCpfCnpj:".hiddenPedidoCompradorCpfCnpj",seletor_hiddenPedidoCompradorNome:".hiddenPedidoCompradorNome",seletor_hiddenPedidoCompradorDDD:".hiddenPedidoCompradorDDD",seletor_hiddenPedidoCompradorTelefone:".hiddenPedidoCompradorTelefone",seletor_hiddenPedidoCompradorEmail:".hiddenPedidoCompradorEmail",seletor_dados_pedido_comprador_nome:".tbxNome",seletor_dados_pedido_comprador_CpfCnpj:".tbxCpfCnpj",seletor_dados_pedido_comprador_DDD:".tbxDDD",seletor_dados_pedido_comprador_email:".tbxEmail",seletor_dados_pedido_comprador_telefone:".tbxTelefone",seletor_dados_pedido_comprador_data_nascimento:"#data_nascimento_comprador",seletor_dados_pedido_comprador:".dados-pedido-comprador",seletor_dados_pedido_comprador_completo:".dados-pedido-comprador-completo",seletor_dados_pedido_comprador_cep:".dados-pedido-comprador-cep",seletor_hiddenPedidoCompradorDestinatario:".hiddenPedidoCompradorDestinatario",seletor_hiddenPedidoCompradorLogradouro:".hiddenPedidoCompradorLogradouro",seletor_hiddenPedidoCompradorNumero:".hiddenPedidoCompradorNumero",seletor_hiddenPedidoCompradorComplemento:".hiddenPedidoCompradorComplemento",seletor_hiddenPedidoCompradorBairro:".hiddenPedidoCompradorBairro",seletor_hiddenPedidoCompradorMunicipio:".hiddenPedidoCompradorMunicipio",seletor_hiddenPedidoCompradorEstado:".hiddenPedidoCompradorEstado",seletor_hiddenPedidoCompradorCEP:".hiddenPedidoCompradorCEP",seletor_hiddenPedidoCompradorDataNascimento:".hiddenPedidoCompradorDataNascimento",seletor_dados_comprador:".jqComprador",seletor_dados_entrega:".jqEntrega",seletor_btn_alterar_comprador_entrega:"#btn-alterar-comprador-entrega",seletor_tipo_destinatario_comprador:".hidden_tipo_destinatario_comprador",seletor_titulo_box_dados:".jqTituloBoxDados",seletor_btn_data_nascimento:"#btnDataNascimento",seletor_campo_observacao:"#txtObservacao",ValidarInformacoesPrimordiaisSessionStorage:function(){var n=!1;window.sessionStorage?$.each(oCheckout.vItensInfoPrimordiaisSessionStorage,function(t,i){sessionStorage.getItem(i)==null&&(n=!0)}):n=!0;n&&(oCheckout.OrigemOnlineOffline=="ONLINE",alert("Sua sessão não possui algumas informações importantes.\nVocê será redirecionado para listagem de alunos."),document.location.href=oCheckout.OrigemOnlineOffline=="ONLINE"?oCheckout.string_url_alunos_online:oCheckout.string_url_alunos_offline)},Carregar:function(){var n=this;n.string_url_base_aplicacao=oInicial.BaseUrlAplicacao;n.string_url_api_get_address_by_cep=n.string_url_base_aplicacao+n.string_url_api_get_address_by_cep;n.string_url_api_get_address_aluno=n.string_url_base_aplicacao+n.string_url_api_get_address_aluno;n.string_url_api_get_list_products=n.string_url_base_aplicacao+n.string_url_api_get_list_products;n.string_url_api_save_cartproduct=n.string_url_base_aplicacao+n.string_url_api_save_cartproduct;n.string_url_api_delete_cartproduct=n.string_url_base_aplicacao+n.string_url_api_delete_cartproduct;n.string_url_selecao_fotos_online=n.string_url_base_aplicacao+n.string_url_selecao_fotos_online;n.string_url_selecao_fotos_offline=n.string_url_base_aplicacao+n.string_url_selecao_fotos_offline;n.string_url_api_get_lista_precos=n.string_url_base_aplicacao+n.string_url_api_get_lista_precos;n.string_url_api_register_order=n.string_url_base_aplicacao+n.string_url_api_register_order;n.string_url_alunos=n.string_url_base_aplicacao+n.string_url_alunos;n.string_url_confirm_page=n.string_url_base_aplicacao+n.string_url_confirm_page;n.string_url_produtos_online=n.string_url_base_aplicacao+n.string_url_produtos_online;n.string_url_produtos_offline=n.string_url_base_aplicacao+n.string_url_produtos_offline;n.string_url_alunos_online=n.string_url_base_aplicacao+n.string_url_alunos_online;n.string_url_alunos_offline=n.string_url_base_aplicacao+n.string_url_alunos_offline;n.string_url_checkout=n.string_url_base_aplicacao+n.string_url_checkout;oUtil.ShowLoader(!0);n.jqThis=$(n.seletor_geral);n.jqDivModalAlteracaoEntrega=$(n.seletor_div_modal_alteracao_entrega);n.jqThis.length>=0&&(n.LimparSessionStorageDadosConclusao(),n.CarregarEventos(),n.CarregarDatePicker())},LimparSessionStorageDadosConclusao:function(){var n=this;window.sessionStorage.removeItem(n.string_ChaveSessionStorageDadosConclusao)},CarregarEventos:function(){var n=this;n.jqThis.on(n.evento_click,n.seletor_ancora_pedido_forma_pgto,function(){n.TratarTrocaOpcoesPgto()}).on(n.evento_change,n.seletor_radios_pedido_pgto_cartao_radio_cartao,function(t){n.TratarTrocaOpcoesCartao(t)}).on(n.evento_change,n.seletor_select_pedido_pgto_cheque_qtd,function(){n.CalculaValorTotal();n.TratarTrocaOpcoesChequeQtd($(this))}).on(n.evento_click,n.seletor_btn_alterar_endereco_entrega,function(){return n.AbrirModalAlteracaoDadosEntrega("destinatario"),!1}).on(n.evento_blur,n.seletor_dados_pedido_nfe_cpf_cnpj,function(t){t.preventDefault();n.ValidarNfeCPF()}).on(n.evento_click,n.seletor_btn_concluir_compra,function(){return n.ValidarConclusaoCompra(),!1}).on(n.evento_change,n.seletor_dadosPedidoPgtoChequeCPF,function(){n.TratarPreenchimentoChequeCPF($(this))}).on(n.evento_change,n.seletor_dadosPedidoPgtoChequeTelefone,function(){n.TratarPreenchimentoChequeTelefone($(this))}).on(n.evento_change,n.seletor_dadosPedidoPgtoChequeVencimento+"."+n.string_replicar,function(){n.TratarPreenchimentoChequeVencimento($(this))}).on(n.evento_change,n.seletor_dadosPedidoPgtoChequeEmitente+"."+n.string_replicar,function(){n.TratarPreenchimentoChequeEmitente($(this))}).on(n.evento_keyup,n.seletor_tbxDadosPedidoPgtoChequeCMC7,function(t){t.preventDefault();n.TratarPreenchimentoChequeCMC7(t,$(this))}).on(n.evento_change,n.seletor_dadosPedidoPgtoCartaoParcelas,function(){return n.CalculaValorTotal(),!1}).on(n.evento_change,n.seletor_dadosPedidoPgtoBoletoQtdParcelas,function(){return n.CalculaValorTotal(),!1}).on(n.evento_keydown,function(t){n.TratarKeyDown(t,$(this))}).on(n.evento_click,function(t){n.TratarKeyDown(t,$(this))}).on(n.evento_click,n.btn_number,function(t){n.BtnNumberAddOrMinus(t,this)}).on(n.evento_focus,n.input_number,function(){n.BtnNumberFocus(this)}).on(n.evento_change,n.input_number,function(){n.BtnNumberChange(this)}).on(n.evento_keydown,n.input_number,function(t){n.BtnNumberKeyDown(t)}).on(n.evento_click,n.seletor_btn_alterar_comprador_entrega,function(){return n.AbrirModalAlteracaoDadosEntrega("comprador"),!1});$(n.seletor_btn_data_nascimento).on(n.evento_click,function(t){n.ShowDataPicker();t.preventDefault()});$(n.seletor_dados_pedido_comprador_CpfCnpj).on(n.evento_change,function(){n.ValidarCPF_CNPJ()});$(n.seletor_dados_pedido_comprador_email).on(n.evento_change,function(){n.ValidaEmailComprador()});n.jqDivModalAlteracaoEntrega.on(n.evento_keyup,n.seletor_input_alteracao_endereco_entrega_cep,function(t){t.preventDefault();n.TratarPreenchimentoCEP(t,$(this))}).on(n.evento_click,n.seletor_btn_confirmar_alteracao_endereco_entrega,function(t){t.preventDefault();n.ValidarFormularioAlteracaoEnderecoEntrega()})},ToogleTypeInputCpfCnpj:function(n){var t=this,i=n||"text";t.jqThis.find(t.seletor_dados_pedido_nfe_cpf_cnpj).attr("type",i)},TratarPreenchimentoChequeCPF:function(n){var t=this,i=n.val().trim();if(n.val(i),i.length==0){n.closest("div").removeClass(t.string_class_is_valid);return}if(i.length!=11&&i.length!=14){n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid);return}if(i.length==11){if(!oUtil.validarCPF(i)){n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid);return}n.hasClass(t.string_replicar)&&t.jqThis.find(t.seletor_dadosPedidoPgtoChequeCPF).val(i).closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid+" "+t.string_is_dirty);n.closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid);return}if(i.length==14){if(!oUtil.validaCNPJ(i)){n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid);return}n.hasClass(t.string_replicar)&&t.jqThis.find(t.seletor_dadosPedidoPgtoChequeCPF).val(i).closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid+" "+t.string_is_dirty);n.closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid);return}},TratarPreenchimentoChequeTelefone:function(n){var t=this,i=n.val().trim(),r,u;i.length>0?(n.val(i),i.length>=10&&!isNaN(i)?(r=i.substr(0,2),u=i.substring(2,i.length),$.inArray(r,["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","64","63","65","66","67","68","69","71","73","74","75","77","79","81","87","82","83","84","85","88","86","89","91","93","94","92","97","95","96","98","99"])>-1&&$.inArray(u.substr(0,1),["0","1"])==-1?(n.hasClass(t.string_replicar)&&t.jqThis.find(t.seletor_dadosPedidoPgtoChequeTelefone).val(i).closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid+" "+t.string_is_dirty),n.closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid)):n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid)):n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid)):n.closest("div").removeClass(t.string_class_is_valid)},TratarPreenchimentoChequeEmitente:function(n){var t=this,i=n.val().trim();i.length>0?(n.val(i),i.length>=4?(n.hasClass(t.string_replicar)&&t.jqThis.find(t.seletor_dadosPedidoPgtoChequeEmitente).val(i).closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid+" "+t.string_is_dirty),n.closest("div").removeClass(t.string_class_is_invalid).addClass(t.string_class_is_valid)):n.closest("div").removeClass(t.string_class_is_valid).addClass(t.string_class_is_invalid)):n.closest("div").removeClass(t.string_class_is_valid)},TratarKeyDown:function(n){var t=this;return n.keyCode==13?(n.preventDefault(),t.jqThis.find(t.seletor_btn_concluir_compra).trigger(t.evento_click),!1):!0},TratarPreenchimentoChequeVencimento:function(n){var f=this,e=n.val().trim();if(e.length){var u=e.split("/"),h=parseInt(u[0]),c=parseInt(u[1]),l=parseInt(u[2]),t=new Date(l,c-1,h),a=f.jqThis.find(f.seletor_dadosPedidoPgtoChequeVencimento).not(n),i="",r="",o="",s="";$.each(a,function(n,u){t.setMonth(t.getMonth()+1);i=t.getDate().toString();r=(t.getMonth()+1).toString();o=t.getFullYear().toString();i=(i.length==1?"0":"")+i;r=(r.length==1?"0":"")+r;s=i+"/"+r+"/"+o;$(u).val(s)})}},AtualizarTotalCheckout:function(n){var t=this;t.jqThis.find(t.seletor_span_valor_dinheiro_especie_recebido).text(oUtil.toReal(n));t.jqThis.find(t.seletor_hiddenPedidoValorTotal).val(n)},ValidarConclusaoCompra:function(){var n=this,i=$(n.seletor_formPedido).serializeObject(),u="",v=0,d="",y=!0,s=[],t=[],g=0,h=0,dt=JSON.parse(sessionStorage.getItem("config_turma_aluno")),c,f,l,p,at,a;if(n.jqThis.find(n.seletor_chk_all+":checked").each(function(){if(u=$(this).attr("data-product-id"),h=n.jqThis.find(oCheckout.seletor_txt_qtd_item+u.toString()).val(),v=n.jqThis.find(n.seletor_spn_qtd_fotos+u).text(),isNaN(v)||Number(v)==0)for(var t=0;t<n.ListaProdutos.length;t++)if(n.ListaProdutos[t].ProductID==Number(u)&&n.ListaProdutos[t].ExibirCarrinho&&n.ListaProdutos[t].QtdMinFoto>0){y=!1;d="Falta selecionar foto(s) para o produto '"+n.ListaProdutos[t].NomeProduto+"'. Você será direcionado para a seleção de fotos.";break}return!isNaN(h)&&Number(h)>0&&s.push({ProdID:Number(u),Qtd:Number(h)}),y?void 0:!1}),!y)return alert(d),n.jqThis.find("a[id='"+n.seletor_link_fotos+u+"']").trigger(n.evento_click),!1;for(c=0;c<s.length;c++){try{valor=parseInt($(s[c]).closest("tr").find(n.seletor_qtd_item).val())}catch(nr){valor=0}g+=valor}if(g==0&&t.push(n.string_validacaoconclusao_nenhum_produto_selecionado),i.dadosPedidoNfeCpfCnpj.length>0)switch(i.dadosPedidoNfeCpfCnpj.length){case 11:oUtil.validarCPF(i.dadosPedidoNfeCpfCnpj)||t.push(n.string_validacaoconclusao_cpf_informado_invalido);break;case 14:oUtil.validaCNPJ(i.dadosPedidoNfeCpfCnpj)||t.push(n.string_validacaoconclusao_cnpj_informado_invalido);break;default:t.push(n.string_validacaoconclusao_cpf_cnpj_invalido)}else t.push(n.string_validacaoconclusao_cpf_cnpj_vazio);switch(n.FormaPgto.Nome){case n.string_pgto_cartao:oOffline.CheckNetConnection()?(f=0,i.dadosPedidoPgtoCartao1Parcelas.length>0&&!isNaN(i.dadosPedidoPgtoCartao1Parcelas)&&(f=parseInt(i.dadosPedidoPgtoBoletoQtdParcelas)),f==0&&t.push(n.string_validacaoconclusao_cartao_qtd_0),i.dadosPedidoPgtoCartao1Numero.length==0&&t.push(n.string_validacaoconclusao_cartao_numero_nao_informado),i.dadosPedidoPgtoCartao1Nome.length==0&&t.push(n.string_validacaoconclusao_cartao_nome_nao_informado),i.dadosPedidoPgtoCartao1Validade.length==0?t.push(n.string_validacaoconclusao_cartao_validade_nao_informada):(i.dadosPedidoPgtoCartao1Validade.length!=7||n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1Validade).closest("div").hasClass(n.string_class_is_invalid))&&t.push(n.string_validacaoconclusao_cartao_validade_invalida),i.dadosPedidoPgtoCartao1CVV.length==0?t.push(n.string_validacaoconclusao_cartao_cvv_nao_informado):n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1CVV).closest("div").hasClass(n.string_class_is_invalid)&&t.push(n.string_validacaoconclusao_cartao_cvv_invalido)):t.push(n.string_validacaoconclusao_cartao_offline);break;case n.string_pgto_boleto:f=0;i.dadosPedidoPgtoBoletoQtdParcelas.length>0&&!isNaN(i.dadosPedidoPgtoBoletoQtdParcelas)&&(f=parseInt(i.dadosPedidoPgtoBoletoQtdParcelas));f==0&&t.push(n.string_validacaoconclusao_boleto_qtd_0);break;case n.string_pgto_cheque:l=n.jqThis.find(n.seletor_div_pedido_pgto_cheque_child+":visible");l.length==0?t.push(n.string_validacaoconclusao_cheque_qtd_parcelas_nao_selecionada):(p=[],$.each(l,function(){if(jqElemento=$(this),r=parseInt(jqElemento.attr("parcela")),jqElementoChequeCpfCnpj=jqElemento.find(n.seletor_dadosPedidoPgtoChequeCPF),jqElementoChequeValor=jqElemento.find(n.seletor_dadosPedidoPgtoChequeValor),jqElementoChequeTelefone=jqElemento.find(n.seletor_dadosPedidoPgtoChequeTelefone),jqElementoChequeDataVencimento=jqElemento.find(n.seletor_dadosPedidoPgtoChequeVencimento),jqElementoChequeEmitente=jqElemento.find(n.seletor_dadosPedidoPgtoChequeEmitente),jqElementoChequeCmc7=jqElemento.find(n.seletor_dadosPedidoPgtoChequeCMC7Completo),jqElementoChequeCpfCnpj.val().length==0?t.push(n.string_validacaoconclusao_cheque_cpf_nao_informado.replace("{$parcela}",r.toString())):jqElementoChequeCpfCnpj.closest("div").hasClass(n.string_class_is_invalid)&&t.push(n.string_validacaoconclusao_cheque_cpf_invalido.replace("{$parcela}",r.toString())),jqElementoChequeValor.val().length==0?t.push(n.string_validacaoconclusao_cheque_valor_nao_informado.replace("{$parcela}",r.toString())):isNaN(Number(jqElementoChequeValor.val()))&&t.push(n.string_validacaoconclusao_cheque_valor_invalido.replace("{$parcela}",r.toString())),jqElementoChequeTelefone.val().length==0?t.push(n.string_validacaoconclusao_cheque_telefone_nao_informado.replace("{$parcela}",r.toString())):oUtil.ValidarTelefone(jqElementoChequeTelefone.val())||t.push(n.string_validacaoconclusao_cheque_telefone_invalido.replace("{$parcela}",r.toString())),jqElementoChequeDataVencimento.val().length==0?t.push(n.string_validacaoconclusao_cheque_vencimento_nao_informado.replace("{$parcela}",r.toString())):oUtil.ValidarDataDDMMAAAA(jqElementoChequeDataVencimento.val())||t.push(n.string_validacaoconclusao_cheque_vencimento_invalido.replace("{$parcela}",r.toString())),jqElementoChequeEmitente.val().length==0&&t.push(n.string_validacaoconclusao_cheque_emitente_nao_informado.replace("{$parcela}",r.toString())),jqElementoChequeCmc7.val().length==0)t.push(n.string_validacaoconclusao_cheque_cmc7_nao_informado.replace("{$parcela}",r.toString()));else{var i=jqElementoChequeCmc7.val();p.indexOf(i)==-1?(p.push(i),oUtil.ValidarCMC7(i)||t.push(n.string_validacaoconclusao_cheque_cmc7_invalido.replace("{$parcela}",r.toString()))):t.push(n.string_validacaoconclusao_cheque_cmc7_duplicado.replace("{$parcela}",r.toString()))}}),n.ValidarSomaParcelasCheque()||t.push(n.string_validacaoconclusao_cheque_somatorio_invalido));break;case n.string_pgto_dinheiro:n.jqThis.find(n.seletor_dadosPedidoCheckRecebimento).is(":checked")||t.push(n.string_validacaoconclusao_dinheiro_check_nao_selecionado)}if(t.length>0)return oUtil.ShowModalGeral("Ops! Verifique os seguintes itens e tente novamente",t),!1;var gt=n.jqThis.find(n.seletor_dados_pedido_nfe_cpf_cnpj).val(),ni=JSON.parse(oUtil.GetCookie("user_offline")).User_ID,nt=Number(n.jqThis.find(n.seletor_hiddenPedidoValorTotal).val()),ti=dt.AlunoTurmaID,tt=n.jqThis.find(n.seletor_hiddenPedidoEnderecoLogradouro).val(),it=n.jqThis.find(n.seletor_hiddenPedidoEnderecoCEP).val(),rt=n.jqThis.find(n.seletor_hiddenPedidoEnderecoDestinatario).val(),ut=n.jqThis.find(n.seletor_hiddenPedidoEnderecoLogradouro).val(),ft=n.jqThis.find(n.seletor_hiddenPedidoEnderecoNumero).val(),et=n.jqThis.find(n.seletor_hiddenPedidoEnderecoComplemento).val(),ot=n.jqThis.find(n.seletor_hiddenPedidoEnderecoBairro).val(),st=n.jqThis.find(n.seletor_hiddenPedidoEnderecoMunicipio).val(),ht=n.jqThis.find(n.seletor_hiddenPedidoEnderecoEstado).val(),ct="BR",ii=n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1Numero).val(),ri=n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1Nome).val(),ui=n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1Validade).val().split("/")[0],fi=n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1Validade).val().split("/")[1],ei=n.jqThis.find(n.seletor_dadosPedidoPgtoCartao1CVV).val(),oi=n.jqThis.find(n.seletor_hiddenPedidoCompradorLogradouro).val(),tr=n.jqThis.find(n.seletor_hiddenPedidoCompradorCEP).val(),si=n.jqThis.find(n.seletor_hiddenPedidoCompradorLogradouro).val(),hi=n.jqThis.find(n.seletor_hiddenPedidoCompradorNumero).val(),ci=n.jqThis.find(n.seletor_hiddenPedidoCompradorComplemento).val(),li=n.jqThis.find(n.seletor_hiddenPedidoCompradorBairro).val(),ai=n.jqThis.find(n.seletor_hiddenPedidoCompradorMunicipio).val(),vi=n.jqThis.find(n.seletor_hiddenPedidoCompradorEstado).val(),lt=n.jqThis.find(n.seletor_hiddenPedidoCompradorCpfCnpj).val(),w=n.jqThis.find(n.seletor_hiddenPedidoCompradorNome).val(),yi=n.jqThis.find(n.seletor_hiddenPedidoCompradorDDD).val(),pi=n.jqThis.find(n.seletor_hiddenPedidoCompradorTelefone).val(),wi=n.jqThis.find(n.seletor_hiddenPedidoCompradorEmail).val(),b=n.jqThis.find(n.seletor_hiddenPedidoCompradorDataNascimento).val();if(b=oUtil.FormatDateYYYYMMDD(b),at=n.jqThis.find(n.seletor_campo_observacao).val(),lt.length==0&&t.push(n.string_validacao_comprador_cpf_cnpj),w.length==0&&t.push(n.string_validacao_comprador_nome),w.length==0&&t.push(n.string_validacao_comprador_email),oi.length==0&&t.push(n.string_validacao_comprador_endereco),si.length==0&&t.push(n.string_validacao_comprador_endereco),hi.length==0&&t.push(n.string_validacao_comprador_endereco),ci.length==0&&t.push(n.string_validacao_comprador_endereco),li.length==0&&t.push(n.string_validacao_comprador_endereco),ai.length==0&&t.push(n.string_validacao_comprador_endereco),vi.length==0&&t.push(n.string_validacao_comprador_endereco),t.length>0)return oUtil.ShowModalGeral("Ops! Verifique os seguintes itens e tente novamente",t),!1;var bi=new checkout_classes_Endereco(tt,rt,it,ut,ft,et,ot,st,ht,ct),ki=new checkout_dados_comprador(lt,w,wi,yi,pi,b,tt,rt,it,ut,ft,et,ot,st,ht,ct),vt=[],o=0;switch(n.FormaPgto.Nome){case n.string_pgto_cartao:o=parseInt(n.jqThis.find(n.seletor_dadosPedidoPgtoCartaoParcelas).val());break;case n.string_pgto_boleto:o=parseInt(n.jqThis.find(n.seletor_dadosPedidoPgtoBoletoQtdParcelas).val());break;case n.string_pgto_cheque:o=parseInt(n.jqThis.find(n.seletor_parcelas_cheque).val());var l=n.jqThis.find(n.seletor_div_pedido_pgto_cheque_child+":visible"),r=0,yt="",pt="",wt="",bt="",kt=0,e="";$.each(l,function(){jqElemento=$(this);r=parseInt(jqElemento.attr("parcela"));yt=jqElemento.find(n.seletor_dadosPedidoPgtoChequeCMC7Completo).val();pt=jqElemento.find(n.seletor_dadosPedidoPgtoChequeCPF).val();wt=jqElemento.find(n.seletor_dadosPedidoPgtoChequeEmitente).val();bt=jqElemento.find(n.seletor_dadosPedidoPgtoChequeTelefone).val();kt=Number(jqElemento.find(n.seletor_dadosPedidoPgtoChequeValor).val());e=jqElemento.find(n.seletor_dadosPedidoPgtoChequeVencimento).val();e=e.substring(6,10)+e.substring(2,6)+e.substring(0,2);vt.push(new checkout_classes_DadosCheque(r,yt,pt,wt,bt,kt,e))});break;case n.string_pgto_dinheiro:o=1}var di=new checkout_classes_DadosCartao(ii,ri,ui,fi,ei),gi=new checkout_classes_DadosPagamento(n.FormaPgto.Type,n.FormaPgto.Group,o,nt,di,vt),k=new checkout_classes_DadosCompra(gt,ti,ni,[],bi,nt,gi,n.OrderID,n.OrigemOnlineOffline,ki,at);n.RecuperaListaProdutos(k,s);a=!0;try{a=oOffline.CheckNetConnection()}catch(nr){a=!1}a?n.RegistrarPedido(k):n.RegistrarPedidoOffline(k)},ValidarSomaParcelasCheque:function(){var n=this;try{var t=0,i=parseFloat(n.jqThis.find(n.seletor_hiddenPedidoValorTotal).val()),r=n.jqThis.find(n.seletor_dadosPedidoPgtoChequeValor+":visible");return $.each(r,function(n,i){t=parseFloat((t+parseFloat(parseFloat($(i).val()).toFixed(2))).toFixed(2))}),t==i?!0:!1}catch(u){console.log("erro: "+u.message)}},TratarPreenchimentoChequeCMC7:function(n,t){var i=this,e=$.inArray(n.keyCode,[96,97,98,99,100,101,102,103,104,105,48,49,50,51,52,53,54,55,56,57]),o=t.val().replace(/[^0-9]/g,"");t.val(o);var r=t.closest(i.seletor_div_dadosPedidoPgtoChequeCMC7).find(i.seletor_tbxDadosPedidoPgtoChequeCMC7),f=0,u="";if(t.val().length==t.attr("maxlength")&&e>-1&&t.hasClass(i.string_replicar)&&i.jqThis.find(t.attr("target")).val(t.val()),$.each(r,function(){if($(this).val().length<$(this).attr("minlength")||$(this).val().length>$(this).attr("maxlength"))return $(this).focus(),!1;f++}),f==r.length)$.each(r,function(){u+=$(this).val()}),oUtil.ValidarCMC7(u)?(i.jqThis.find(i.seletor_dadosPedidoPgtoChequeCMC7Completo_$+t.attr("cheque")).val(u),r.removeClass(i.string_class_is_invalid).addClass(i.string_class_is_valid),r.first().closest("div").siblings(i.seletor_span_msg_erro_cmc7).hide()):(i.jqThis.find(i.seletor_dadosPedidoPgtoChequeCMC7Completo_$+t.attr("cheque")).val(""),r.removeClass(i.string_class_is_valid).addClass(i.string_class_is_invalid),r.first().closest("div").siblings(i.seletor_span_msg_erro_cmc7).show());else return i.jqThis.find(i.seletor_dadosPedidoPgtoChequeCMC7Completo_$+t.attr("cheque")).val(""),!1},ValidarFormularioAlteracaoEnderecoEntrega:function(){var n=this,t="",r=$(n.seletor_tipo_destinatario_comprador).val().trim(),i;$(n.seletor_msg_erro_validacao_alteracao_endereco_entrega).text("");$(n.seletor_msg_erro_validacao_alteracao_endereco_entrega).promise().done(function(){jQuery(this).slideUp(n.string_intervalo_animacao,function(){jQuery(this).html("")})});var u=$(n.seletor_input_alteracao_endereco_entrega_cep).val().trim(),f=$(n.seletor_input_alteracao_endereco_entrega_destinatario).val().trim(),e=$(n.seletor_input_alteracao_endereco_entrega_logradouro).val().trim(),o=$(n.seletor_input_alteracao_endereco_entrega_numero).val().trim(),s=$(n.seletor_input_alteracao_endereco_entrega_bairro).val().trim(),h=$(n.seletor_input_alteracao_endereco_entrega_cidade).val().trim(),c=$(n.seletor_select_alteracao_endereco_entrega_estado).val().trim(),w=$(n.seletor_input_alteracao_endereco_entrega_complemento).val().trim(),l=$(n.seletor_dados_pedido_comprador_CpfCnpj).val().trim(),a=$(n.seletor_dados_pedido_comprador_email).val().trim(),v=$(n.seletor_dados_pedido_comprador_telefone).val().trim(),y=$(n.seletor_dados_pedido_comprador_nome).val().trim(),p=$(n.seletor_dados_pedido_comprador_DDD).val().trim(),b=$(n.seletor_dados_pedido_comprador_data_nascimento).val().trim();u.length!=8&&(t+="- CEP inválido;<br/>");e.length==0&&(t+="- Logradouro inválido;<br/>");o.length==0&&(t+="- Número inválido;<br/>");s.length==0&&(t+="- Infome um bairro;<br/>");h.length==0&&(t+="- Infome uma cidade;<br/>");c.length==0&&(t+="- Infome um estado;<br/>");r=="comprador"?(oUtil.ValidarCPF_CNPJ(l)||(t+="- CPF / CNPJ inválido;<br/>"),oUtil.IsValidEmail(a)||(t+="- Email inválido;<br/>"),(p.length==0||v.length==0)&&(t+="Telefone inválido;<br/>"),y.length==0&&(t+="- Infome o nome do comprador;<br/>")):f.length==0&&(t+="- Destinatário inválido;<br/>");t.length>0?$(n.seletor_msg_erro_validacao_alteracao_endereco_entrega).promise().done(function(){jQuery(this).html(t).slideDown(400)}):(i={Destinatario:f,AddressLine:e,AddressNumber:o,AddressComplement:w,ZipCode:u,Neighbourhood:s,City:h,State:c,CpfCnpj:l,Email:a,Nome:y,ddd:p,Telefone:v,DataNascimento:b},r=="comprador"?n.EscreveEnderecoComprador(i):n.EscreveEndereco(i),$(n.seletor_form_alteracao_endereco_entrega)[0].reset(),n.jqDivModalAlteracaoEntrega.modal("hide"))},ValidarNfeCPF:function(){var n=this,t;jqElemento=n.jqThis.find(n.seletor_dados_pedido_nfe_cpf_cnpj);String_CPF_CNPJ=jqElemento.val().trim();String_CPF_CNPJ.length>0?String_CPF_CNPJ.length==11||String_CPF_CNPJ.length==14?(t=String_CPF_CNPJ.length==11?oUtil.validarCPF(String_CPF_CNPJ):oUtil.validaCNPJ(String_CPF_CNPJ),t?$(n.seletor_div_dados_pedido_nfe_cpf_cnpj).removeClass(n.string_class_is_invalid).addClass(n.string_class_is_valid):$(n.seletor_div_dados_pedido_nfe_cpf_cnpj).removeClass(n.string_class_is_valid).addClass(n.string_class_is_invalid)):$(n.seletor_div_dados_pedido_nfe_cpf_cnpj).removeClass(n.string_class_is_valid).addClass(n.string_class_is_invalid):$(n.seletor_div_dados_pedido_nfe_cpf_cnpj).removeClass(n.string_class_is_valid)},TratarPreenchimentoCEP:function(n,t){var r=this,u=$.inArray(n.keyCode,[96,97,98,99,100,101,102,103,104,105,48,49,50,51,52,53,54,55,56,57]),i=t.val().replace(/[^0-9]+/g,"");return i.length>8&&(i=i.substring(0,8)),t.val(i),i.length==8&&u>-1?oOffline.CheckNetConnection()?r.RequisicaoInfoEndereco(i):r.LimparFormAlteracaoEnderecoEntrega():u>-1,!1},CarregarDatePicker:function(){var n=this,t=n.jqThis.find(n.seletor_datepicker);t.length>=0&&(config=oUtil.GetConfigDatePicker(),t.datetimepicker(config),jQuery(".datetimepicker").datetimepicker({timepicker:!1,format:"d/m/Y"}))},TratarRetornoAPIBuscaInfoCEP:function(n){var t=this;n&&(n.Address!=undefined&&($(t.seletor_input_alteracao_endereco_entrega_logradouro).val(n.Address.Logradouro!=undefined&&n.Address.Logradouro.trim().length>0?n.Address.Logradouro.trim():""),$(t.seletor_input_alteracao_endereco_entrega_numero).val(n.Address.Numero!=undefined&&n.Address.Numero.trim().length>0?n.Address.Numero.trim():"").attr("disabled",function(){return $(this).val().trim().length>0}),$(t.seletor_input_alteracao_endereco_entrega_bairro).val(n.Address.Bairro!=undefined&&n.Address.Bairro.trim().length>0?n.Address.Bairro.trim():"").attr("disabled",function(){return $(this).val().trim().length>0}),$(t.seletor_input_alteracao_endereco_entrega_cidade).val(n.Address.Municipio!=undefined&&n.Address.Municipio.trim().length>0?n.Address.Municipio.trim():"").attr("disabled",function(){return $(this).val().trim().length>0}),$(t.seletor_select_alteracao_endereco_entrega_estado).val(n.Address.UF!=undefined&&n.Address.UF.trim().length>0?n.Address.UF.trim().toUpperCase():"").attr("disabled",function(){return $(this).val().trim().length>0})),n.Sucesso&&$(t.seletor_input_alteracao_endereco_entrega_destinatario).focus())},LimparFormAlteracaoEnderecoEntrega:function(){var n=this;$(n.seletor_input_alteracao_endereco_entrega_numero).val("").attr("disabled",!1);$(n.seletor_input_alteracao_endereco_entrega_bairro).val("").attr("disabled",!1);$(n.seletor_input_alteracao_endereco_entrega_cidade).val("").attr("disabled",!1);$(n.seletor_select_alteracao_endereco_entrega_estado).val("").attr("disabled",!1)},TratarTrocaOpcoesPgto:function(){var n=this,t=n.jqThis.find(n.seletor_ancora_pedido_forma_pgto_ativo).attr(n.string_forma_pgto);n.jqThis.find(n.seletor_hiddenPedidoFormaPgto).val(t);switch(t){case n.string_pgto_cartao:n.FormaPgto.Type=1;n.FormaPgto.Group=2;n.FormaPgto.Nome=t;break;case n.string_pgto_boleto:n.FormaPgto.Type=21;n.FormaPgto.Group=3;n.FormaPgto.Nome=t;break;case n.string_pgto_cheque:n.FormaPgto.Type=20;n.FormaPgto.Group=7;n.FormaPgto.Nome=t;break;case n.string_pgto_dinheiro:n.FormaPgto.Type=22;n.FormaPgto.Group=8;n.FormaPgto.Nome=t}n.CalculaValorTotal();n.jqThis.find(n.seletor_ancora_pedido_forma_pgto_ativo).attr(n.string_forma_pgto)=="cartao-credito"&&oOffline.verifyOnline()},TratarTrocaOpcoesCartao:function(n){var t=this;"#"+n.target.id==t.seletor_radio_pedido_pgto_cartao_radio_cartao_1?t.jqThis.find(t.seletor_div_pedido_pgto_cartao2).slideUp():"#"+n.target.id==t.seletor_radio_pedido_pgto_cartao_radio_cartao_2&&t.jqThis.find(t.seletor_div_pedido_pgto_cartao2).slideDown()},TratarTrocaOpcoesChequeQtd:function(n){var t=this,i,r;try{i=parseInt(n.val()==""?0:n.val())}catch(h){i=0}if(i>t.jqPedidoPgtoChequeQtdAtual)for(r=t.jqPedidoPgtoChequeQtdAtual;r<=i;r++)t.jqThis.find(t.seletor_div_pedido_pgto_cheque_child+'[parcela="'+r.toString()+'"]').show();else for(r=t.jqPedidoPgtoChequeQtdAtual;r>i;r--)t.jqThis.find(t.seletor_div_pedido_pgto_cheque_child+'[parcela="'+r.toString()+'"]').hide();try{var f=parseFloat(t.jqThis.find(t.seletor_hiddenPedidoValorTotal).val()),u=(f/i).toFixedWithoutRound(2),e=(u*i).toFixedWithoutRound(2),o=parseFloat((f-e).toFixed(2)),s=parseFloat((u+o).toFixed(2));t.jqThis.find(t.seletor_dadosPedidoPgtoChequeValor+":visible").val(u.toFixed(2));t.jqThis.find(t.seletor_dadosPedidoPgtoChequeValor+":visible").last().val(s.toFixed(2))}catch(h){}t.jqPedidoPgtoChequeQtdAtual=i},AbrirModalAlteracaoDadosEntrega:function(n){var t=this;$(t.seletor_tipo_destinatario_comprador).val(n);n=="destinatario"?($(t.seletor_dados_comprador).addClass("hidden"),$(t.seletor_dados_entrega).removeClass("hidden"),$(t.seletor_titulo_box_dados).text("Dados de entrega"),$(t.seletor_input_alteracao_endereco_entrega_cep).val($(t.seletor_hiddenPedidoEnderecoCEP).val()),$(t.seletor_input_alteracao_endereco_entrega_destinatario).val($(t.seletor_hiddenPedidoEnderecoDestinatario).val()),$(t.seletor_input_alteracao_endereco_entrega_logradouro).val($(t.seletor_hiddenPedidoEnderecoLogradouro).val()),$(t.seletor_input_alteracao_endereco_entrega_numero).val($(t.seletor_hiddenPedidoEnderecoNumero).val()),$(t.seletor_input_alteracao_endereco_entrega_bairro).val($(t.seletor_hiddenPedidoEnderecoBairro).val()),$(t.seletor_input_alteracao_endereco_entrega_cidade).val($(t.seletor_hiddenPedidoEnderecoMunicipio).val()),$(t.seletor_select_alteracao_endereco_entrega_estado).val($(t.seletor_hiddenPedidoEnderecoEstado).val()),$(t.seletor_input_alteracao_endereco_entrega_complemento).val($(t.seletor_hiddenPedidoEnderecoComplemento).val())):($(t.seletor_dados_comprador).removeClass("hidden"),$(t.seletor_dados_entrega).addClass("hidden"),$(t.seletor_titulo_box_dados).text("Dados do comprador"),$(t.seletor_dados_pedido_comprador_CpfCnpj).val($(t.seletor_hiddenPedidoCompradorCpfCnpj).val()),$(t.seletor_dados_pedido_comprador_nome).val($(t.seletor_hiddenPedidoCompradorNome).val()),$(t.seletor_dados_pedido_comprador_DDD).val($(t.seletor_hiddenPedidoCompradorDDD).val()),$(t.seletor_dados_pedido_comprador_telefone).val($(t.seletor_hiddenPedidoCompradorTelefone).val()),$(t.seletor_dados_pedido_comprador_email).val($(t.seletor_hiddenPedidoCompradorEmail).val()),$(t.seletor_dados_pedido_comprador_data_nascimento).val($(t.seletor_hiddenPedidoCompradorDataNascimento).val()),$(t.seletor_input_alteracao_endereco_entrega_cep).val($(t.seletor_hiddenPedidoCompradorCEP).val()),$(t.seletor_input_alteracao_endereco_entrega_logradouro).val($(t.seletor_hiddenPedidoCompradorLogradouro).val()),$(t.seletor_input_alteracao_endereco_entrega_numero).val($(t.seletor_hiddenPedidoCompradorNumero).val()),$(t.seletor_input_alteracao_endereco_entrega_bairro).val($(t.seletor_hiddenPedidoCompradorBairro).val()),$(t.seletor_input_alteracao_endereco_entrega_cidade).val($(t.seletor_hiddenPedidoCompradorMunicipio).val()),$(t.seletor_select_alteracao_endereco_entrega_estado).val($(t.seletor_hiddenPedidoCompradorEstado).val()),$(t.seletor_input_alteracao_endereco_entrega_complemento).val($(t.seletor_hiddenPedidoEnderecoComplemento).val()));t.jqDivModalAlteracaoEntrega.modal()},RequisicaoInfoEndereco:function(n){var t=this;t.EmRequisicaoApiCEP||$.ajax({method:"POST",url:t.string_url_api_get_address_by_cep+"?cep="+n,contentType:"application/json",data:JSON.stringify({cep:n}),headers:oUtil.GetToken(),beforeSend:function(){$(t.seletor_input_alteracao_endereco_entrega_cep).attr("disabled",!0);t.LimparFormAlteracaoEnderecoEntrega();t.EmRequisicaoApiCEP=!0;oUtil.ShowLoader(!0)}}).done(function(n){t.TratarRetornoAPIBuscaInfoCEP(n)}).fail(function(n){n.status==401&&console.log("TODO: TRATAR 401")}).always(function(){oUtil.ShowLoader(!1);$(t.seletor_input_alteracao_endereco_entrega_cep).attr("disabled",!1);t.EmRequisicaoApiCEP=!1})},ToogleInfoTransacaoCartao:function(n){var t=this;n?$(t.seletor_div_checkout_transacao_fade_offline).is(":visible")&&$(t.seletor_div_checkout_transacao_fade_offline).fadeOut():$(t.seletor_div_checkout_transacao_fade_offline).is(":visible")||$(t.seletor_div_checkout_transacao_fade_offline).fadeIn()},ToogleBtnNaoSeiMeuCEP:function(n){var t=this;n?$(t.seletor_btn_alteracao_endereco_entrega_nao_sei_meu_cep).fadeIn():$(t.seletor_btn_alteracao_endereco_entrega_nao_sei_meu_cep).fadeOut()},GetListProducts:function(){var n=this,i=JSON.parse(sessionStorage.getItem("config_turma_aluno")),t;n.ListaProdutos.length==0&&(t=oInicial.BaseUrlAplicacao,(t==""||t==undefined)&&(t="/"),jQuery.ajax({method:"POST",url:n.string_url_api_get_list_products+"?AlunoTurmaID="+(i!=null?i.AlunoTurmaID.toString():"0")+"&url_base="+t,data:{},headers:oUtil.GetToken(),beforeSend:function(){}}).done(function(t){for(var r,i=0;i<t.List.length;i++)r=n.CreateItemListProduct(),r.Checked=t.List[i].Checked,r.ProductID=t.List[i].ProductID,r.NomeProduto=t.List[i].ProductName,r.UsaPrecoPorFoto=t.List[i].UsaPrecoPorFoto,r.Qtd=t.List[i].Qtd,r.QtdFoto=t.List[i].QtdFoto,r.ExibirCarrinho=t.List[i].ExibirCarrinho,r.ProdutoObrigatorio=t.List[i].ProdutoObrigatorio,r.QtdMaxFoto=t.List[i].QtdMaxFoto,r.QtdMinFoto=t.List[i].QtdMinFoto,r.PercentualDescarte=t.List[i].PercentualDescarte,r.AlbumID=t.List[i].AlbumID,r.param_selecao_fotos=t.List[i].param_selecao_fotos,n.ListaProdutos.push(r);t.List.length>0&&(n.OrigemOnlineOffline="ONLINE");n.ExibeProdutos()}).fail(function(t,i){n.TrataErroCart(t,i)}).always(function(){}))},ExibeProdutos:function(){for(var n=this,t=0;t<n.ListaProdutos.length;t++)n.EscreveLinhaTabela(t,n.ListaProdutos[t]);n.jqThis.find(n.seletor_chk_all).bind(n.evento_click,function(t){var r=n.jqThis.find(t.target),u=r.attr("data-product-id"),f=r.prop("checked"),i=n.jqThis.find("#txt_"+u),e=parseInt(i.val());f==!1?i.val(0):f==!0&&e==0&&i.val(1);n.UpdateCartProducts(u);n.CalculaValorTotal();return});n.jqThis.find(n.seletor_qtd_item).bind(n.evento_change,function(t){var i=n.jqThis.find(t.target),r=i.attr("data-product-id"),u=n.jqThis.find(n.seletor_chk_item+r),f=parseInt(i.val()),e=parseInt(i.attr("min"));if(!(f<e)){f>0?u.prop("checked",!0):u.prop("checked",!1);n.UpdateCartProducts(r);n.CalculaValorTotal();return}});n.CallSelectRequiredProducts();oUtil.RefactorMDL_JS();n.OrdernarLinhasOcultas();oUtil.ShowLoader(!1)},EscreveLinhaTabela:function(n,t){var e=t.Checked?"checked":"",i=this,o="",u=0,f="",r,s;t.ExibirCarrinho&&t.Qtd!=0||(f="style='display:none;'");t.ProdutoObrigatorio&&t.ExibirCarrinho&&(o="jqChkRequiredProduct",u=1,t.Qtd>0&&(e="checked"));t.Qtd==0&&(f="style='display:none;'");r="-";oCheckout.OrigemOnlineOffline=="OFFLINE"&&t.QtdMinFoto>0?r="<a href='#' target='_self' id='"+oCheckout.seletor_link_fotos+t.ProductID+"' class='ancora-acao ancora-acao-visualizar ancora-acao-btn hidden' title='Visualizar'>Selecionar Fotos<\/a>":t.QtdMinFoto>0&&(r="<a  href='#' id='"+oCheckout.seletor_link_fotos+t.ProductID+"' class='ancora-acao ancora-acao-visualizar ancora-acao-btn hidden'>Selecionar Fotos<\/a>");disabledMin="";t.Qtd==u&&(disabledMin="disabled=disabled");s="<tr "+f+" id='tbProd_tr_"+t.ProductID+'\'><td><label class="LabelCheckProduct mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="chk_'+t.ProductID+'"><input type="checkbox" id="chk_'+t.ProductID+'" class="mdl-checkbox__input jqCheckProduct '+o+'" data-product-id="'+t.ProductID+'" '+e+' /><span class="mdl-checkbox__label"><\/span><\/label><\/td><td>'+t.NomeProduto+'<\/td><td class="text-center"> <div class="div-grupo-alterar-qtd"> <div class="input-group"><span class="input-group-btn hidden"> <button type="button" class="btn btn-danger btn-number btn-number-'+t.ProductID+"\" data-product-id='"+t.ProductID+'\' data-type="minus" data-field="quant[2]" '+disabledMin+'> <span class="glyphicon glyphicon-minus"><\/span> <\/button> <\/span> <input type="text" name="quant[2]" class="form-control input-number jqQtdProduct" id=\'txt_'+t.ProductID+"' data-product-id='"+t.ProductID+"' value="+t.Qtd+' min="'+u+'" max="1000" readonly> <span class="input-group-btn hidden"> <button type="button" class="btn btn-success btn-number btn-number-'+t.ProductID+"\" data-product-id='"+t.ProductID+'\' data-type="plus" data-field="quant[2]"> <span class="glyphicon glyphicon-plus"><\/span> <\/button><\/span><\/div><\/div><\/td><td class="text-center"><span id=\'spn_'+t.ProductID+"'>"+t.QtdFoto+"<\/span><br/>"+r+" <\/td>";i.jqThis.find(oCheckout.seletor_tabela_produtos+" tbody").append(s);i.jqThis.find("a[id='"+oCheckout.seletor_link_fotos+t.ProductID+"']").bind(i.evento_click,function(){oUtil.ShowLoader(!0);oCheckout.OrigemOnlineOffline=="OFFLINE"?i.ViewProducts(t.ProductID,t.QtdMaxFoto,t.QtdMinFoto,t.PercentualDescarte,t.NomeProduto,t.ProductConfigID,t.Grupo):window.location=i.string_url_selecao_fotos_online+t.param_selecao_fotos})},RecuperaEnderecoOffline:function(){var t=this,u=dbControl.v_GRD_ListaAlunos.Name,i=JSON.parse(sessionStorage.getItem("config_turma_aluno")),n=oOffline.getCookie(oCheckout.cookie_user_name),r;n=JSON.parse(n);r={AlunoID:Number(i.AlunoID),TurmaID:Number(i.TurmaID),BrandID:Number(n.Brand_ID)};dbControl.SelectByIndexComplex(u,r,function(n){if(n&&n.length>0){var i={Destinatario:n[0].NomeAluno,AddressLine:n[0].AddressLine,AddressNumber:n[0].AddressNumber,AddressComplement:n[0].AddressComplement,ZipCode:n[0].ZipCode,Neighbourhood:n[0].Neighbourhood,City:n[0].City,State:n[0].State};t.EscreveEndereco(i);t.EscreveEnderecoComprador(i)}})},EscreveEndereco:function(n){var t=this;$(t.seletor_dados_pedido_endereco_destinatario).text(n.Destinatario);$(t.seletor_dados_pedido_endereco_completo).text(n.AddressLine+", "+n.AddressNumber+" - "+(n.AddressComplement.length>0?n.AddressComplement+" - ":"")+n.Neighbourhood+" - "+n.City+"/"+n.State);$(t.seletor_dados_pedido_endereco_cep).text(n.ZipCode.substring(0,5)+"-"+n.ZipCode.substring(5,8));$(t.seletor_hiddenPedidoEnderecoCEP).val(n.ZipCode);$(t.seletor_hiddenPedidoEnderecoDestinatario).val(n.Destinatario);$(t.seletor_hiddenPedidoEnderecoLogradouro).val(n.AddressLine);$(t.seletor_hiddenPedidoEnderecoNumero).val(n.AddressNumber);$(t.seletor_hiddenPedidoEnderecoComplemento).val(n.AddressComplement);$(t.seletor_hiddenPedidoEnderecoBairro).val(n.Neighbourhood);$(t.seletor_hiddenPedidoEnderecoMunicipio).val(n.City);$(t.seletor_hiddenPedidoEnderecoEstado).val(n.State)},EscreveEnderecoComprador:function(n){var t=this,i="";n.Nome!=undefined&&(i=n.Nome);n.CpfCnpj!=undefined&&(i+=" - "+n.CpfCnpj);$(t.seletor_dados_pedido_comprador).text(i);$(t.seletor_dados_pedido_comprador_completo).text(n.AddressLine+", "+n.AddressNumber+" - "+(n.AddressComplement.length>0?n.AddressComplement+" - ":"")+n.Neighbourhood+" - "+n.City+"/"+n.State);$(t.seletor_dados_pedido_comprador_cep).text(n.ZipCode.substring(0,5)+"-"+n.ZipCode.substring(5,8));$(t.seletor_hiddenPedidoCompradorCpfCnpj).val(n.CpfCnpj);$(t.seletor_hiddenPedidoCompradorNome).val(n.Nome);$(t.seletor_hiddenPedidoCompradorDDD).val(n.ddd);$(t.seletor_hiddenPedidoCompradorTelefone).val(n.Telefone);$(t.seletor_hiddenPedidoCompradorEmail).val(n.Email);$(t.seletor_hiddenPedidoCompradorDataNascimento).val(n.DataNascimento);$(t.seletor_hiddenPedidoCompradorCEP).val(n.ZipCode);$(t.seletor_hiddenPedidoCompradorDestinatario).val(n.Destinatario);$(t.seletor_hiddenPedidoCompradorLogradouro).val(n.AddressLine);$(t.seletor_hiddenPedidoCompradorNumero).val(n.AddressNumber);$(t.seletor_hiddenPedidoCompradorComplemento).val(n.AddressComplement);$(t.seletor_hiddenPedidoCompradorBairro).val(n.Neighbourhood);$(t.seletor_hiddenPedidoCompradorMunicipio).val(n.City);$(t.seletor_hiddenPedidoCompradorEstado).val(n.State)},RecuperaEnderecoOnline:function(){var n=this,t=JSON.parse(sessionStorage.getItem("config_turma_aluno"));$.ajax({method:"POST",url:n.string_url_api_get_address_aluno+"?AlunoTurmaID="+(t!=null?t.AlunoTurmaID.toString():"0"),data:{},headers:oUtil.GetToken(),beforeSend:function(){}}).done(function(t){if(t.length>0){var i={Destinatario:t[0].NomeAluno,AddressLine:t[0].AddressLine,AddressNumber:t[0].AddressNumber,AddressComplement:t[0].AddressComplement,ZipCode:t[0].ZipCode,Neighbourhood:t[0].Neighbourhood,City:t[0].City,State:t[0].State};n.EscreveEndereco(i);n.EscreveEnderecoComprador(i)}}).fail(function(t,i){t.status==401&&console.log("TODO: TRATAR 401");n.TrataErroCart(t,i)}).always(function(){})},RecuperaListaProductID:function(){var n=this;n.jqThis.find(n.seletor_chk_all).each(function(){n.ListaProdIDs.push(Number($(this).attr("data-product-id")))})},RecuperaListaPrecoOffline:function(){var n=this,i=dbControl.v_GRD_TabelaPreco.Name,r=JSON.parse(sessionStorage.getItem("config_turma_aluno")),t=oOffline.getCookie(oCheckout.cookie_user_name);t=JSON.parse(t);n.ListaProdIDs.length==0&&n.RecuperaListaProductID();dbControl.SelectALL(i,function(i){if(i&&i.length>0)for(var u=0;u<i.length;u++)i[u].BrandID==t.Brand_ID&&i[u].TurmaID==r.TurmaID&&n.ListaProdIDs.indexOf(i[u].ProductID)>=0&&n.ListaPrecos.push(i[u])})},CalculaValorTotal:function(){var n=this,r=0,f=[],u=0,i="",t,s;switch(n.FormaPgto.Nome){case n.string_pgto_cartao:i=n.jqThis.find(n.seletor_dadosPedidoPgtoCartaoParcelas).val();break;case n.string_pgto_boleto:i=n.jqThis.find(n.seletor_dadosPedidoPgtoBoletoQtdParcelas).val();break;case n.string_pgto_cheque:i=n.jqThis.find(n.seletor_parcelas_cheque).val();break;case n.string_pgto_dinheiro:i="1"}for(u=isNaN(i)?1:Number(i),n.jqThis.find(n.seletor_chk_all+":checked").each(function(){var n=Number($(this).attr("data-product-id"));f.push(n)}),t=0;t<n.ListaPrecos.length;t++)if(f.indexOf(n.ListaPrecos[t].ProductID)>=0&&n.ListaPrecos[t].Parcela==u){var e=n.ListaPrecos[t].ProductID.toString(),h=Number(n.jqThis.find(n.seletor_txt_qtd_item+e).val()),o=n.ListaPrecos[t].Preco*h;n.ListaPrecos[t].UsaPrecoPorFoto&&(s=Number(n.jqThis.find(n.seletor_spn_qtd_fotos+e).text()),o+=s*n.ListaPrecos[t].PrecoFoto);r+=o}n.jqThis.find(n.seletor_valor_total).text(oUtil.toReal(r));n.AtualizarTotalCheckout(r);n.CalcularValorParcelas(r,u)},CalcularValorParcelas:function(n,t){var i=this,n=n||0,t=t||0,r="0x de R$ 0,00",u=0;u=(n/t).toFixedWithoutRound(2);isNaN(Number(u))||t!=0&&n!=0&&(r=t.toString()+"x de "+oUtil.toReal(u));switch(i.FormaPgto.Nome){case i.string_pgto_cartao:i.jqThis.find(i.seletor_spanValorParcelasCartao).text(r);break;case i.string_pgto_boleto:i.jqThis.find(i.seletor_spanValorParcelasBoleto).text(r)}},UpdateCartProducts:function(n){var t=this;t.OrigemOnlineOffline=="OFFLINE"?t.UpdateCartProductOffline(n):t.UpdateCartProductOnline(n)},UpdateCartProductOffline:function(n){var i=this,r=JSON.parse(sessionStorage.getItem("config_turma_aluno")),t={};t.AlunoTurmaID=Number(r.AlunoTurmaID);t.ProductID=Number(n);t.UserID=Number(r.UserIdVendedor);dbControl.DeleteByIndexComplex(dbControl.GRD_CART_PRODUCT.Name,t,function(){var u=i.jqThis.find(i.seletor_txt_qtd_item+n).val(),f,r;i.jqThis.find(i.seletor_chk_item+n).is(":checked")&&!isNaN(u)&&(f=i.jqThis.find(i.seletor_spn_qtd_fotos+n).text(),r={},r.AlunoTurmaID=t.AlunoTurmaID,r.BookID=0,r.ID=t.ProductID,r.ProductID=t.ProductID,r.Qtd=Number(u),r.QtdFoto=Number(f),r.UserID=Number(t.UserID),dbControl.Insert(dbControl.GRD_CART_PRODUCT.Name,r,function(){}))})},UpdateCartProductOnline:function(n){var r=oOffline.getCookie(oCheckout.cookie_user_name);r=JSON.parse(r);var e=JSON.parse(sessionStorage.getItem("config_turma_aluno")),t=this,i={},u="",f=t.jqThis.find(t.seletor_txt_qtd_item+n).val(),o=t.jqThis.find(t.seletor_spn_qtd_fotos+n).text();if(i.AlunoTurmaID=Number(e.AlunoTurmaID),i.BookID=0,i.ID=0,i.ProductID=Number(n),i.QtdFoto=Number(o),i.UserID=Number(r.User_ID),t.jqThis.find(t.seletor_chk_item+n).is(":checked")){if(u=t.string_url_api_save_cartproduct,isNaN(f)||Number(f)==0)return}else u=t.string_url_api_delete_cartproduct;i.Qtd=Number(f);jQuery.ajax({method:"POST",url:u,contentType:"application/json",data:JSON.stringify(i),headers:oUtil.GetToken(),beforeSend:function(){}}).done(function(){}).fail(function(n,i){t.TrataErroCart(n,i)}).always(function(){})},ViewProducts:function(n,t,i,r,u,f,e){var s=this,o=JSON.parse(sessionStorage.getItem("config_turma_aluno")),h=oOffline.getCookie(oCheckout.cookie_user_name),c;h=JSON.parse(h);c={AlbumID:o.AlbumID,AlunoTurmaID:o.AlunoTurmaID,AlunoTurmaID_Cript:o.AlunoTurmaID_Cript,ProductID:n,QtdMaxFoto:t,QtdMinFoto:i,PercentualDescarte:r,NomeProduto:u,ProductConfigID:f,Grupo:e,url_retorno:s.string_url_checkout};sessionStorage.setItem(oOffline.cookie_validacao_fotos,JSON.stringify(c));document.location.href=s.string_url_selecao_fotos_offline},CreateItemListProduct:function(){return{Checked:!1,ProductID:0,NomeProduto:"",UsaPrecoPorFoto:!1,Qtd:0,QtdFoto:0,ExibirCarrinho:!1,ProdutoObrigatorio:!1,QtdMaxFoto:0,QtdMinFoto:0,PercentualDescarte:0,AlbumID:0,param_selecao_fotos:!1}},RecuperaListaPrecoOnline:function(){_this=this;var t=JSON.parse(sessionStorage.getItem("config_turma_aluno")),n=oOffline.getCookie(oCheckout.cookie_user_name);n=JSON.parse(n);jQuery.ajax({method:"POST",url:_this.string_url_api_get_lista_precos+"?brandID="+n.Brand_ID+"&turmaID="+t.TurmaID,data:{},headers:oUtil.GetToken(),beforeSend:function(){}}).done(function(n){for(var t=0;t<n.List.length;t++)_this.ListaPrecos.push(n.List[t])}).fail(function(n,t){_this.TrataErroCart(n,t)}).always(function(){})},GravarDadosSessionStorage:function(){var n=this,i=new checkout_classes_DadosConfirmacao(n.objDadosPedido.origemOnLineOffline,n.objDadosPedido.valorTotal,n.objDadosPedido.Code!=undefined?n.objDadosPedido.Code:n.objDadosPedido.orderId.toString(),n.objDadosPedido.orderId,n.FormaPgto.Nome),t=null;try{t=JSON.stringify(i)}catch(r){}t!=null?window.sessionStorage.setItem(n.string_ChaveSessionStorageDadosConclusao,t):console.log("Dados não gravados no sessionStorage.")},RedirecionarConfirmacaoPedido:function(){var n=this;window.document.location=n.string_url_confirm_page},RegistrarPedido:function(n){var t=this;oUtil.ShowLoader(!0);t.ListaProdutos.length>0&&jQuery.ajax({method:"POST",url:t.string_url_api_register_order,contentType:"application/json",data:JSON.stringify(n),headers:oUtil.GetToken(),beforeSend:function(){}}).done(function(i){oUtil.ShowLoader(!1);t.OrderID=Number(i.Order.order_id);i.Order.Sucesso?(t.objDadosPedido=n,t.objDadosPedido.orderId=t.OrderID,t.objDadosPedido.Code=i.Order.code,t.objDadosPedido.origemOnLineOffline="ONLINE",t.GravarDadosSessionStorage(),t.RedirecionarConfirmacaoPedido()):oUtil.ShowModalError(100,i.Order.Mensagem,"","Erro ao confirmar o pagamento.")}).fail(function(n){var t=n.responseJSON,i="Não foi possível registrar o pedido.";t.Mensagem!=undefined&&t.Mensagem!=""&&(i+="\r\n "+t.Mensagem);var r=t.erro_id;oUtil.ShowModalError(r,i,"","Erro ao registrar pedido")}).always(function(){oUtil.ShowLoader(!1)})},RecuperaListaProdutos:function(n,t){var u=this,r,i;if(u.OrigemOnlineOffline=="OFFLINE")for(r=0;r<t.length;r++)i=new checkout_classes_DadosProdutos,i.productId=t[r].ProdID,i.qtd=t[r].Qtd,i.listPhotoId=u.ListaFotosProducts[i.productId],i.qtd>0&&n.produtos.push(i)},RegistrarPedidoOffline:function(n){_this=this;var t=JSON.parse(sessionStorage.getItem("config_turma_aluno")),i=new pedidos_pendentes_cls(n,t.NomeAluno,t.NomeTurma,oUtil.FormatDate3(new Date),"Pendente",null,0,[]);dbControl.Insert(dbControl.Orders_Pending.Name,i,function(){_this.objDadosPedido=n;_this.objDadosPedido.origemOnLineOffline="OFFLINE";_this.GravarDadosSessionStorage();_this.RedirecionarConfirmacaoPedido()})},TrataErroCart:function(n){var t=this;t.jqThis.find(t.seletor_btn_concluir_compra).prop("disabled",!0);oUtil.ShowModalError("","",n)},BtnNumberAddOrMinus:function(n,t){var u=this;n.preventDefault();fieldName=$(t).attr("data-field");type=$(t).attr("data-type");prodID=$(t).attr("data-product-id");var i=u.jqThis.find("#txt_"+prodID),f=u.jqThis.find("#chk_"+prodID),r=parseInt(i.val());isNaN(r)?i.val(0):type=="minus"?(r>i.attr("min")&&i.val(r-1).change(),parseInt(i.val())==i.attr("min")&&$(t).attr("disabled",!0)):type=="plus"&&(r<i.attr("max")&&i.val(r+1).change(),parseInt(i.val())==i.attr("max")&&$(t).attr("disabled",!0));parseInt(i.val())==0?f.closest("label")[0].MaterialCheckbox.uncheck():parseInt(i.val())>0&&f.closest("label")[0].MaterialCheckbox.check()},BtnNumberFocus:function(n){$(n).data("oldValue",$(n).val())},BtnNumberChange:function(n){minValue=parseInt($(n).attr("min"));maxValue=parseInt($(n).attr("max"));valueCurrent=parseInt($(n).val());prodID=$(n).attr("data-product-id");name=$(n).attr("name");valueCurrent>=minValue?$(".btn-number-"+prodID+"[data-type='minus'][data-field='"+name+"']").removeAttr("disabled"):(oUtil.ShowModalError("","O valor mínimo foi alcançado"),$(n).val($(n).data("oldValue")));valueCurrent<=maxValue?$(".btn-number-"+prodID+"[data-type='plus'][data-field='"+name+"']").removeAttr("disabled"):(oUtil.ShowModalError("","O valor máximo foi alcançado"),$(n).val($(n).data("oldValue")))},BtnNumberKeyDown:function(n){$.inArray(n.keyCode,[46,8,9,27,13,190])!==-1||n.keyCode==65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()},CallSelectRequiredProducts:function(){var n=this;n.jqThis.find(".jqChkRequiredProduct").each(function(){var t=$(this),r=t.attr("data-product-id"),i=n.jqThis.find("#txt_"+r),u=parseInt(i.val());u==0&&(i.val(1),t.click());t.attr("disabled","disabled")})},OrdernarLinhasOcultas:function(){var n=this,t=n.jqThis.find(n.seletor_tabela_produtos).find("tbody tr").not(":visible");n.jqThis.find(n.seletor_tabela_produtos).find("tbody tr").not(":visible").remove();n.jqThis.find(n.seletor_tabela_produtos).find("tbody").append(t)},GoToProducts:function(n,t){document.location.href=oCheckout.OrigemOnlineOffline=="ONLINE"?n+"?a="+sessionStorage.getItem("AlunoTurmaID_Cript2"):t},ValidarCPF_CNPJ:function(){var n=this,t;jqElemento=$(n.seletor_dados_pedido_comprador_CpfCnpj);String_CPF_CNPJ=jqElemento.val().trim();String_CPF_CNPJ.length>0?String_CPF_CNPJ.length==11||String_CPF_CNPJ.length==14?(t=String_CPF_CNPJ.length==11?oUtil.validarCPF(String_CPF_CNPJ):oUtil.validaCNPJ(String_CPF_CNPJ),t?$(n.seletor_dados_pedido_comprador_CpfCnpj).removeClass(n.string_class_is_invalid).addClass(n.string_class_is_valid):$(n.seletor_dados_pedido_comprador_CpfCnpj).removeClass(n.string_class_is_valid).addClass(n.string_class_is_invalid)):$(n.seletor_dados_pedido_comprador_CpfCnpj).removeClass(n.string_class_is_valid).addClass(n.string_class_is_invalid):$(n.seletor_dados_pedido_comprador_CpfCnpj).removeClass(n.string_class_is_valid)},ValidaEmailComprador:function(){var n=this,t=$(n.seletor_dados_pedido_comprador_email).val();oUtil.IsValidEmail(t)?$(n.seletor_dados_pedido_comprador_email).removeClass(n.string_class_is_invalid).addClass(n.string_class_is_valid):$(n.seletor_dados_pedido_comprador_email).removeClass(n.string_class_is_valid).addClass(n.string_class_is_invalid)},ShowDataPicker:function(){jQuery(".datetimepicker").datetimepicker("show")}};oOffline.verifyAcesso();$(document).ready(function(){oCheckout.Carregar()});oOffline.CallbackVerifyOnline=function(n){oCheckout.ToogleInfoTransacaoCartao(n);oCheckout.ToogleBtnNaoSeiMeuCEP(n)};dbControl.CallbackOpenOnSuccess=function(){var i;oCheckout.ValidarInformacoesPrimordiaisSessionStorage();var r=dbControl.v_GRD_Products.Name,n=JSON.parse(sessionStorage.getItem("config_turma_aluno")),t=oOffline.getCookie(oCheckout.cookie_user_name);t=JSON.parse(t);oCheckout.OrigemOnlineOffline=n.Origem;i="";i=oCheckout.OrigemOnlineOffline=="ONLINE"?oCheckout.string_url_produtos_online+"?a="+n.AlunoTurmaID_Cript:oCheckout.string_url_produtos_offline;$(".nav-principal a[href='/Produtos']").attr("href",i);oCheckout.OrigemOnlineOffline=="OFFLINE"?dbControl.SelectALL(r,function(i){var e,f,o;if(i&&i.length>0){for(i=oUtil.SortByString(i,!0,"NomeProduto"),e=[],f=0;f<i.length;f++){var s={AlunoTurmaID:Number(n.AlunoTurmaID),ProductID:i[f].ProductID,UserID:t.User_ID},h=dbControl.GRD_CART_PRODUCT.Name,r=i[f],u=oCheckout.CreateItemListProduct();u.Checked=!1;u.ProductID=r.ProductID;u.NomeProduto=r.NomeProduto;u.UsaPrecoPorFoto=r.UsaPrecoPorFoto;u.ExibirCarrinho=r.ExibirCarrinho;u.ExibirListaProdutos=r.ExibirListaProdutos;u.ProdutoObrigatorio=r.ProdutoObrigatorio;u.QtdMaxFoto=r.QtdMaxFoto;u.QtdMinFoto=r.QtdMinFoto;u.PercentualDescarte=r.PercentualDescarte;u.AlbumID=r.AlbumID;u.param_selecao_fotos=r.param_selecao_fotos;u.ProductConfigID=r.ProductConfigID;u.Grupo=r.Grupo;oCheckout.ListaProdutos.push(u);e.push(r.ProductID);oCheckout.ListaFotosProducts[r.ProductID]=[];dbControl.SelectByIndexComplex(h,s,function(n){if(n&&n.length>0){var t=n[0].ProductID;oCheckout.jqThis.find(oCheckout.seletor_chk_item+t.toString()).closest("label")[0].MaterialCheckbox.check();oCheckout.jqThis.find(oCheckout.seletor_spn_qtd_fotos+t.toString()).text(n[0].QtdFoto);oCheckout.jqThis.find(oCheckout.seletor_txt_qtd_item+t.toString()).val(n[0].Qtd==0?1:n[0].Qtd);oCheckout.jqThis.find("#tbProd_tr_"+t.toString()).show()}})}o=dbControl.GRD_ORDER_PRODUCT_PHOTOS.Name;dbControl.SelectALL(o,function(t){if(t&&t.length>0)for(var i=0;i<t.length;i++)t[i].AlunoTurmaID==Number(n.AlunoTurmaID)&&e.indexOf(t[i].ProductID)>=0&&oCheckout.ListaFotosProducts[t[i].ProductID].push(t[i].PhotoID)});oCheckout.ExibeProdutos();oCheckout.RecuperaEnderecoOffline();oCheckout.RecuperaListaPrecoOffline()}oCheckout.ValidarInformacoesPrimordiaisSessionStorage()}):$(document).ready(function(){oCheckout.GetListProducts();oCheckout.RecuperaEnderecoOnline();oCheckout.RecuperaListaPrecoOnline()})};
/*
//# sourceMappingURL=checkout.min.js.map
*/